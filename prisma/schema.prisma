// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

// 1. USU√ÅRIOS (Admin, Barbeiro e Cliente)
model User {
  id        Int     @id @default(autoincrement())
  nome      String
  email     String  @unique
  senha     String
  tipo      String  // "cliente", "barbeiro", "admin"
  
  // Detalhes extras (apenas para barbeiros)
  descricao String? 
  fotoUrl   String?
  // O campo 'preco' foi REMOVIDO daqui pois agora √© global

  // Relacionamentos
  agendamentosCliente  Agendamento[]     @relation("cliente")
  agendamentosBarbeiro Agendamento[]     @relation("barbeiro")
  disponibilidades     Disponibilidade[]
}

// 2. AGENDAMENTOS
model Agendamento {
  id         Int    @id @default(autoincrement())
  data       String
  horario    String
  
  clienteId  Int
  cliente    User   @relation("cliente", fields: [clienteId], references: [id])

  barbeiroId Int
  barbeiro   User   @relation("barbeiro", fields: [barbeiroId], references: [id])
}

// 3. DISPONIBILIDADE (Agenda do Barbeiro)
model Disponibilidade {
  id         Int    @id @default(autoincrement())
  data       String
  horarios   String // Ex: "09:00,10:00,11:00"

  barbeiroId Int
  barbeiro   User   @relation(fields: [barbeiroId], references: [id])
}

// 4. CONFIGURA√á√ÉO GLOBA (Pre√ßo √önico)
// √â aqui que o seu erro vai sumir! üëá
model Configuracao {
  id         Int    @id @default(autoincrement())
  precoCorte Float  @default(40.00)
  precoSinal Float  @default(20.00)
}